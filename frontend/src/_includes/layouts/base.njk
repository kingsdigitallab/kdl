{% extends "kdl/base.njk" %}

{% set baseUrl = config.baseUrl %}
{% set assetsPath = config.paths.assets %}
{% set imagesPath = config.paths.images %}
{% set mainClass = layout | replace("layouts/", "") | replace(".njk", "") %}
{% set stylesheetsPath = config.paths.stylesheets %}

{% block headExtra %}
  <base href="{{ baseUrl }}" />
{% endblock headExtra %}

{% block headMeta %}
  {% seo "" %}
{% endblock headMeta %}

{% block stylesheets %}
  <link href="/_pagefind/pagefind-ui.css" rel="stylesheet">
  {{ super() }}
{% endblock stylesheets %}

{% block headerStart %}
  {{ headerMacro(config) }}
{% endblock headerStart %}

{% block menu %}
  {{- navMacro({
    title: "Menu",
    pages: collections.all | eleventyNavigation,
    currentUrl: page.url
    }, {
    action: "menu-toggle",
    class: "main",
    nested: true,
    ordered: false
    }) 
  -}}
{% endblock menu %}

{% block headerEnd %}
  <div id="search" role="search"></div>

  <nav class="sub">
    <div class="kdl-container">
      <h1>Projects</h1>
      <ul>
        <li>
          <a href="#overview">All</a>
        </li>
        <li>
          <a href="#Team">Active</a>
        </li>
        <li>
          <a href="#Team">Archived</a>
        </li>
      </ul>
    </div>
  </nav>

  {% if navKey and navKey != "Home" %}
    {{- breadcrumbsMacro({
        pages: collections.all | eleventyNavigationBreadcrumb(navKey, { includeSelf: true }) 
    })
    -}}
  {% endif %}
{% endblock headerEnd %}

{% block content %}
  <div class="kdl-container">
    <h1>{{ title | safe }}</h1>

    {% include "partials/toc.njk" %}

    {{ content | safe }}
  </div>
{% endblock content %}

{% block footer %}
  <footer>
    {% include "partials/footer.njk" %}

  </footer>
{% endblock footer %}

{% block bodyEnd %}
  <script src="/_pagefind/pagefind-ui.js" type="text/javascript"></script>
  <script>
    window.addEventListener('DOMContentLoaded', (event) => {
      new PagefindUI({element: "#search"});
    });
  </script>
{% endblock bodyEnd %}
