{% extends "kdl/base.njk" %}

{% set baseUrl = config.baseUrl | url %}
{% set assetsPath = config.paths.assets | url %}
{% set imagesPath = config.paths.images | url %}
{% set stylesheetsPath = config.paths.stylesheets | url %}

{% block headExtra %}
  <base href="{{ baseUrl }}"/>
{% endblock headExtra %}

{% block headMeta %}
  {% seo "" %}
{% endblock headMeta %}

{% block stylesheets %}
  <link href="{% route '/_pagefind/pagefind-ui.css' %}" rel="stylesheet">
  {{ super() }}
{% endblock stylesheets %}

{% block headerStart %}
  {{ headerMacro(config) }}
{% endblock headerStart %}

{% block menu %}
  {{-
  navMacro({
  title: "Menu",
  pages: collections.all | eleventyNavigation,
  currentUrl: page.url
  }, {
  nested: true,
  ordered: false,
  action: "menu"
  })
  -}}
{% endblock menu %}

{% block headerEnd %}
  <div id="search" role="search"></div>
{% endblock headerEnd %}

{% block content %}
  <header>
    {% if navKey and navKey != "Home" %}
    {{-
    breadcrumbsMacro({
    pages: collections.all | eleventyNavigationBreadcrumb(navKey, { includeSelf: true })
    })
    -}}
    {% endif %}
    <h1>{{ title | safe }}</h1>
  </header>
  {% include "partials/toc.njk" %}
  {{ content | safe }}
{% endblock content %}

  <footer>
    {% include "partials/footer.njk" %}
  </footer>

{% block bodyEnd %}
  <script src="{% route '/_pagefind/pagefind-ui.js' %}" type="text/javascript"></script>
  <script>
    window.addEventListener('DOMContentLoaded', (event) => {
      new PagefindUI({element: "#search"});
    });
  </script>
{% endblock bodyEnd %}
